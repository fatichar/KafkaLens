<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="AvaloniaApp.Views.EditClustersDialog"
        Title="Edit Clusters &amp; Clients"
        Width="800"
        Height="600"
        xmlns:vm="clr-namespace:KafkaLens.ViewModels;assembly=KafkaLens.ViewModels"
        xmlns:entities="clr-namespace:KafkaLens.Shared.Entities;assembly=KafkaLens.Shared"
        xmlns:clientEntities="clr-namespace:KafkaLens.Clients.Entities;assembly=KafkaLens.Shared"
        x:DataType="vm:EditClustersViewModel">

    <DockPanel Margin="10">
        <Button Name="OpenSettingsButton" DockPanel.Dock="Bottom" HorizontalAlignment="Right"
                Click="OpenSettingsButton_OnClick">Open Settings dir...</Button>

        <TabControl>
            <!-- DIRECT CLUSTERS TAB -->
            <TabItem Header="Direct Clusters">
                <Grid RowDefinitions="*,Auto" Margin="10">
                    <DataGrid Name="ClustersGrid" Grid.Row="0"
                              ItemsSource="{Binding Clusters}"
                              CanUserReorderColumns="True"
                              CanUserResizeColumns="True"
                              CanUserSortColumns="True"
                              SelectionMode="Single"
                              IsReadOnly="True"
                              BorderBrush="Gray"
                              BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Status" Width="Auto">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="vm:ClusterInfoViewModel">
                                        <Ellipse Width="10" Height="10" Fill="{Binding StatusColor}" ToolTip.Tip="{Binding ConnectionStatus}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn x:DataType="vm:ClusterInfoViewModel" Header="Name" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn x:DataType="vm:ClusterInfoViewModel" Header="Address" Binding="{Binding Address}" Width="2*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10" Margin="0,10,0,0">
                        <Button Content="Add" Click="AddCluster_Click"/>
                        <Button Content="Edit" Click="EditCluster_Click" IsEnabled="{Binding #ClustersGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"/>
                        <Button Content="Remove" Click="RemoveCluster_Click" IsEnabled="{Binding #ClustersGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"/>
                    </StackPanel>
                </Grid>
            </TabItem>

            <!-- KAFKALENS CLIENTS TAB -->
            <TabItem Header="KafkaLens Clients">
                <Grid RowDefinitions="*,Auto" Margin="10">
                    <DataGrid Name="ClientsGrid" Grid.Row="0"
                              ItemsSource="{Binding Clients}"
                              CanUserReorderColumns="True"
                              CanUserResizeColumns="True"
                              CanUserSortColumns="True"
                              SelectionMode="Single"
                              IsReadOnly="True"
                              BorderBrush="Gray"
                              BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Status" Width="Auto">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate x:DataType="vm:ClientInfoViewModel">
                                        <Ellipse Width="10" Height="10" Fill="{Binding StatusColor}" ToolTip.Tip="{Binding ConnectionStatus}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn x:DataType="vm:ClientInfoViewModel" Header="Name" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn x:DataType="vm:ClientInfoViewModel" Header="Address" Binding="{Binding Address}" Width="2*"/>
                            <DataGridTextColumn x:DataType="vm:ClientInfoViewModel" Header="Protocol" Binding="{Binding Protocol}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10" Margin="0,10,0,0">
                        <Button Content="Add" Click="AddClient_Click"/>
                        <Button Content="Edit" Click="EditClient_Click" IsEnabled="{Binding #ClientsGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"/>
                        <Button Content="Remove" Click="RemoveClient_Click" IsEnabled="{Binding #ClientsGrid.SelectedItem, Converter={x:Static ObjectConverters.IsNotNull}}"/>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </DockPanel>
</Window>